<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meine Traumwohnung</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞ Inter */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω */
            color: #374151; /* –¢–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç */
        }
        /* –°—Ç–∏–ª—å –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —á—Ç–æ–±—ã –≤–º–µ—Å—Ç–∏—Ç—å –ø–ª–∞–≤–∞—é—â–µ–µ –º–µ–Ω—é */
        .main-layout {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
            max-width: 1200px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
            margin: 0 auto;
            position: relative; /* –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞–≤–∞—é—â–µ–≥–æ –º–µ–Ω—é */
        }
        @media (min-width: 1024px) { /* –î–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
            .main-layout {
                flex-direction: row;
                align-items: flex-start;
                justify-content: center;
                gap: 2rem;
            }
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–æ–º–Ω–∞—Ç—ã */
        .room {
            background-color: #ffffff; /* –ë–µ–ª—ã–π —Ñ–æ–Ω –¥–ª—è –∫–æ–º–Ω–∞—Ç */
            border: 1px solid #d1d5db; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π –±–æ—Ä–¥—é—Ä */
            border-radius: 0.5rem; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            display: flex; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º flexbox –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ */
            flex-direction: column; /* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
            align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
            justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            font-weight: bold;
            font-size: 1rem; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è –Ω–æ–º–µ—Ä–æ–≤ */
            color: #1f2937; /* –¢–µ–º–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –Ω–æ–º–µ—Ä–æ–≤ */
            padding: 0.5rem; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
            width: 100%; /* –ó–∞–ø–æ–ª–Ω—è–µ—Ç —è—á–µ–π–∫—É —Å–µ—Ç–∫–∏ */
            height: 100%; /* –ó–∞–ø–æ–ª–Ω—è–µ—Ç —è—á–µ–π–∫—É —Å–µ—Ç–∫–∏ */
            text-align: center;
            position: relative; /* –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–≤–µ—Ä–µ–π –≤–Ω—É—Ç—Ä–∏ */
            overflow: hidden; /* –ß—Ç–æ–±—ã –¥–≤–µ—Ä–∏ –Ω–µ –≤—ã—Ö–æ–¥–∏–ª–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–º–Ω–∞—Ç—ã */
            cursor: grab; /* –ö—É—Ä—Å–æ—Ä –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è */
            touch-action: none; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫—É –Ω–∞ —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
            box-sizing: border-box; /* –í–∫–ª—é—á–∞–µ–º padding –∏ border –≤ –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä */
        }
        .room.dragging {
            cursor: grabbing;
            z-index: 20; /* –ß—Ç–æ–±—ã –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–∞—è –∫–æ–º–Ω–∞—Ç–∞ –±—ã–ª–∞ —Å–≤–µ—Ä—Ö—É */
            opacity: 0.8;
            position: absolute; /* –î–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è */
            /* –†–∞–∑–º–µ—Ä—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ JS */
        }
        .room .text-xl {
            font-size: 1.125rem; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è –Ω–æ–º–µ—Ä–∞ */
        }
        .room .text-sm {
            font-size: 0.75rem; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ */
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∫–æ—Ä–∏–¥–æ—Ä–∞ */
        .corridor-room {
            background-color: #e0f2f7; /* –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π —Ñ–æ–Ω –¥–ª—è –∫–æ—Ä–∏–¥–æ—Ä–∞ */
            border-color: #90caf9; /* –ì–æ–ª—É–±–æ–π –±–æ—Ä–¥—é—Ä */
        }
        /* –°—Ç–∏–ª—å –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –¥–≤–µ—Ä–µ–π */
        .door-indicator {
            background-color: #b0b0b0; /* –°–µ—Ä—ã–π —Ü–≤–µ—Ç –¥–ª—è –¥–≤–µ—Ä–µ–π */
            border-radius: 2px;
            position: absolute;
            z-index: 10; /* –ß—Ç–æ–±—ã –¥–≤–µ—Ä–∏ –±—ã–ª–∏ –Ω–∞–¥ —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∫–æ–º–Ω–∞—Ç—ã */
        }
        .door-top {
            width: 30px; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–≤–µ—Ä–µ–π */
            height: 4px;
            top: -2px; /* –ù–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ä–¥—é—Ä */
            left: 50%;
            transform: translateX(-50%);
        }
        .door-right {
            width: 4px;
            height: 30px;
            right: -2px;
            top: 50%;
            transform: translateY(-50%);
        }
        .door-bottom {
            width: 30px;
            height: 4px;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
        }
        .door-left {
            width: 4px;
            height: 30px;
            left: -2px;
            top: 50%;
            transform: translateY(-50%);
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –ø–ª–∞–≤–∞—é—â–µ–≥–æ –º–µ–Ω—é (–ø–∞–ª–∏—Ç—Ä—ã) */
        #roomPalette {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background-color: #ffffff;
            border: 1px solid #d1d5db;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 1rem;
            z-index: 100;
            width: 180px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
            max-height: 90vh;
            overflow-y: auto;
            transition: transform 0.3s ease-in-out;
        }
        @media (max-width: 1023px) { /* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
            #roomPalette {
                position: static; /* –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
                width: 100%;
                margin-bottom: 1rem;
            }
            .main-layout {
                flex-direction: column-reverse; /* –ü–∞–ª–∏—Ç—Ä–∞ —Å–≤–µ—Ä—Ö—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            }
        }

        .palette-item {
            display: flex;
            align-items: center;
            justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —ç–º–æ–¥–∑–∏ */
            padding: 0.5rem 0.75rem;
            margin-bottom: 0.5rem;
            background-color: #f3f4f6;
            border-radius: 0.375rem;
            cursor: grab; /* –ö—É—Ä—Å–æ—Ä –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è */
            transition: background-color 0.2s ease-in-out;
            font-size: 1.5rem; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —ç–º–æ–¥–∑–∏ */
            font-weight: 500;
            height: 60px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥–ª—è —ç–º–æ–¥–∑–∏ */
        }
        .palette-item:hover {
            background-color: #e5e7eb;
        }
        .palette-item.in-use {
            background-color: #d1fae5; /* –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–Ω–∞—Ç */
            color: #065f46;
            border: 1px solid #34d399;
            cursor: default; /* –ù–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è, –µ—Å–ª–∏ —É–∂–µ –Ω–∞ —Ö–æ–ª—Å—Ç–µ */
        }
        /* –°—Ç–∏–ª—å –¥–ª—è –ª–µ–≥–µ–Ω–¥—ã (–≤–∏–∫—Ç–æ—Ä–∏–Ω—ã) */
        .legend-item {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            background-color: #f9fafb;
        }
        .legend-text-row {
            display: flex;
            align-items: center;
            width: 100%;
            flex-wrap: wrap; /* –ü–æ–∑–≤–æ–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–∞–º –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É */
        }
        .quiz-input {
            flex-grow: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
            padding: 0.25rem 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.25rem;
            margin-right: 0.5rem;
            min-width: 80px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –≤–≤–æ–¥–∞ */
        }
        .check-btn, .reveal-btn {
            background-color: #6366f1;
            color: white;
            padding: 0.3rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            margin-left: 0.5rem;
            white-space: nowrap; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏ */
        }
        .check-btn:hover, .reveal-btn:hover {
            background-color: #4f46e5;
        }
        .feedback-message {
            margin-top: 0.5rem;
            font-size: 0.875rem;
            font-weight: bold;
            width: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
        }
        .feedback-correct {
            color: #10b981; /* –ó–µ–ª–µ–Ω—ã–π */
        }
        .feedback-incorrect {
            color: #ef4444; /* –ö—Ä–∞—Å–Ω—ã–π */
        }
        .correct-answer-display {
            color: #10b981;
            font-weight: normal;
            margin-left: 0.5rem;
            display: none; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ */
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –≤ –ª–µ–≥–µ–Ω–¥–µ */
        .legend-item.correct {
            background-color: #d1fae5; /* –°–≤–µ—Ç–ª–æ-–∑–µ–ª–µ–Ω—ã–π */
            border-color: #34d399;
        }
        .legend-item.incorrect {
            background-color: #fee2e2; /* –°–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π */
            border-color: #ef4444;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è —Ü–≤–µ—Ç–Ω—ã—Ö —Ç–æ—á–µ–∫ */
        .color-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
            flex-shrink: 0; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∂–∞—Ç–∏–µ —Ç–æ—á–∫–∏ */
        }
        .dot-pink { background-color: #ec4899; } /* Tailwind pink-500 */
        .dot-blue { background-color: #3b82f6; } /* Tailwind blue-500 */
        .dot-green { background-color: #22c55e; } /* Tailwind green-500 */


        /* –°—Ç–∏–ª—å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–ª–∞–Ω–∞ —ç—Ç–∞–∂–∞ */
        #floorPlanDisplay {
            display: grid;
            grid-template-columns: repeat(5, 100px); /* –°–µ—Ç–∫–∞ 5x5 —Å —è—á–µ–π–∫–∞–º–∏ –ø–æ 100px */
            grid-template-rows: repeat(5, 100px);
            gap: 0px; /* –ë–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–∫–æ–≤ –º–µ–∂–¥—É —è—á–µ–π–∫–∞–º–∏ */
            position: relative;
            width: 500px; /* 5 * 100px */
            height: 500px; /* 5 * 100px */
            border: 2px dashed #a0aec0; /* –ë–æ—Ä–¥—é—Ä –¥–ª—è –∑–æ–Ω—ã –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è */
            background-color: #e2e8f0; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω */
            overflow: hidden; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤—ã—Ö–æ–¥ –∫–æ–º–Ω–∞—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        }
        /* –°—Ç–∏–ª—å –¥–ª—è –ø—É—Å—Ç—ã—Ö —è—á–µ–µ–∫ —Å–µ—Ç–∫–∏ */
        .grid-cell {
            border: 1px solid rgba(0,0,0,0.05); /* –õ–µ–≥–∫–∏–π –±–æ—Ä–¥—é—Ä –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–∫–∏ */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: #9ca3af;
        }
        .grid-cell.highlight {
            background-color: rgba(99, 102, 241, 0.2); /* –°–≤–µ—Ç–ª–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ */
            border: 2px solid #6366f1;
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div class="main-layout">
        <div class="flex-1 max-w-2xl w-full bg-white p-6 sm:p-8 rounded-xl shadow-lg">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-center mb-6 text-indigo-700">Meine Traumwohnung</h1>

            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–Ω–æ–º -->
            <div class="mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200">
                <p class="text-lg font-medium text-gray-700 mb-2">
                    Ziehen Sie Zimmer aus der Palette auf den Grundriss, um Ihren Plan zu erstellen!
                </p>
                <button id="clearPlanBtn"
                        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                    Plan l√∂schen
                </button>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–ª–∞–Ω–∞ —ç—Ç–∞–∂–∞ -->
            <div id="floorPlanContainer" class="mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200 min-h-[200px] flex items-center justify-center">
                <div id="floorPlanDisplay">
                    <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–º–Ω–∞—Ç—ã -->
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è –ª–µ–≥–µ–Ω–¥—ã (–≤–∏–∫—Ç–æ—Ä–∏–Ω—ã) -->
            <div id="legendContainer" class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Ordnen Sie</h2>
                <p class="text-gray-600 mb-4">Geben Sie die Zimmernummer ein, die dem deutschen Namen entspricht.</p>
                <div class="flex items-center justify-between mb-4" id="checkAllContainer">
                    <button id="checkAllBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                        Antworten anzeigen
                    </button>
                    <span id="scoreDisplay" class="text-lg font-semibold text-gray-800">Richtige Antworten: 0/0</span>
                </div>
                <div id="legendDisplay" class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4">
                    <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ –ª–µ–≥–µ–Ω–¥–∞ -->
                </div>
            </div>
        </div>

        <!-- –ü–ª–∞–≤–∞—é—â–µ–µ –º–µ–Ω—é (–ø–∞–ª–∏—Ç—Ä–∞) -->
        <div id="roomPalette">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">Verf√ºgbare Zimmer:</h3>
            <div id="paletteItemsContainer">
                <!-- –≠–ª–µ–º–µ–Ω—Ç—ã –ø–∞–ª–∏—Ç—Ä—ã –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <script>
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã DOM
        const clearPlanBtn = document.getElementById('clearPlanBtn');
        const floorPlanDisplay = document.getElementById('floorPlanDisplay');
        const legendDisplay = document.getElementById('legendDisplay');
        const checkAllBtn = document.getElementById('checkAllBtn');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const paletteItemsContainer = document.getElementById('paletteItemsContainer');

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ç–µ–∫—É—â–∏—Ö –∫–æ–º–Ω–∞—Ç–∞—Ö –Ω–∞ —Ö–æ–ª—Å—Ç–µ
        let currentRoomsOnCanvas = [];
        const GRID_CELL_SIZE = 100; // –†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
        const GRID_ROWS = 5;
        const GRID_COLS = 5;

        // –ö–∞—Ä—Ç–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–º–Ω–∞—Ç–∞—Ö
        const allRoomsMap = new Map([
            // –î–æ–±–∞–≤–ª–µ–Ω—ã gridWidth –∏ gridHeight –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–Ω–∞—Ç—ã
            // –î–æ–±–∞–≤–ª–µ–Ω 'article' –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–Ω–∞—Ç—ã
            ['Flur', { ukrainian: '–ö–æ—Ä–∏–¥–æ—Ä', content: 'üß•üëü', gridWidth: 2, gridHeight: 1, article: 'Der' }],
            ['Wohnzimmer', { ukrainian: '–í—ñ—Ç–∞–ª—å–Ω—è', content: 'üõãÔ∏èüì∫', gridWidth: 1, gridHeight: 1, article: 'Das' }],
            ['K√ºche', { ukrainian: '–ö—É—Ö–Ω—è', content: 'üçΩÔ∏èüç≥ü•ò', gridWidth: 1, gridHeight: 1, article: 'Die' }],
            ['Bad', { ukrainian: '–í–∞–Ω–Ω–∞ –∫—ñ–º–Ω–∞—Ç–∞', content: 'üõÅüöø', gridWidth: 1, gridHeight: 1, article: 'Das' }], // –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ 'Bad' –∏ –Ω–æ–≤—ã–µ —ç–º–æ–¥–∑–∏
            ['Toilette', { ukrainian: '–¢—É–∞–ª–µ—Ç', content: 'üöΩüßª', gridWidth: 1, gridHeight: 1, article: 'Die' }], // –ù–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞
            ['Schlafzimmer', { ukrainian: '–°–ø–∞–ª—å–Ω—è', content: 'üõèÔ∏èüö™', gridWidth: 1, gridHeight: 1, article: 'Das' }],
            ['Kinderzimmer', { ukrainian: '–î–∏—Ç—è—á–∞ –∫—ñ–º–Ω–∞—Ç–∞', content: 'üß∏üìö', gridWidth: 1, gridHeight: 1, article: 'Das' }],
            ['Arbeitszimmer', { ukrainian: '–ö–∞–±—ñ–Ω–µ—Ç', content: 'üñ•Ô∏èü™ë', gridWidth: 1, gridHeight: 1, article: 'Das' }],
            ['Balkon', { ukrainian: '–ë–∞–ª–∫–æ–Ω', content: 'ü™ë‚òÄÔ∏è', gridWidth: 1, gridHeight: 1, article: 'Der' }],
        ]);

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ —Ü–≤–µ—Ç–∞ —Ç–æ—á–∫–∏ –ø–æ –∞—Ä—Ç–∏–∫–ª—é
        function getDotColorClass(article) {
            switch (article) {
                case 'Die': return 'dot-pink';
                case 'Der': return 'dot-blue';
                case 'Das': return 'dot-green';
                default: return '';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –∑–∞–Ω—è—Ç–∞ –ª–∏ –æ–±–ª–∞—Å—Ç—å —è—á–µ–µ–∫
        function isAreaOccupied(startRow, startCol, width, height, excludeRoomId = null) {
            for (let r = startRow; r < startRow + height; r++) {
                for (let c = startCol; c < startCol + width; c++) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —è—á–µ–π–∫–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Å–µ—Ç–∫–∏
                    if (r < 1 || r > GRID_ROWS || c < 1 || c > GRID_COLS) {
                        return true; // –û–±–ª–∞—Å—Ç—å –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Å–µ—Ç–∫–∏
                    }
                    const roomInCell = currentRoomsOnCanvas.find(room =>
                        room.id !== excludeRoomId && // –ò—Å–∫–ª—é—á–∞–µ–º –∫–æ–º–Ω–∞—Ç—É, –∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º
                        r >= room.gridRow && r < (room.gridRow + room.gridHeight) &&
                        c >= room.gridColumn && c < (room.gridColumn + room.gridWidth)
                    );
                    if (roomInCell) {
                        return true; // –Ø—á–µ–π–∫–∞ –∑–∞–Ω—è—Ç–∞
                    }
                }
            }
            return false; // –û–±–ª–∞—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω–∞
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Ü–µ–ª–µ–≤—ã—Ö —è—á–µ–µ–∫
        let highlightedCells = [];
        function highlightTargetCells(startRow, startCol, width, height) {
            removeHighlight(); // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –ø–æ–¥—Å–≤–µ—Ç–∫—É

            for (let r = startRow; r < startRow + height; r++) {
                for (let c = startCol; c < startCol + width; c++) {
                    const targetCell = floorPlanDisplay.querySelector(`.grid-cell[style*="grid-row: ${r}"][style*="grid-column: ${c}"]`);
                    if (targetCell) {
                        targetCell.classList.add('highlight');
                        highlightedCells.push(targetCell);
                    }
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏
        function removeHighlight() {
            highlightedCells.forEach(cell => cell.classList.remove('highlight'));
            highlightedCells = [];
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ª–µ–≥–µ–Ω–¥—ã (–≤–∏–∫—Ç–æ—Ä–∏–Ω—ã)
        function renderLegendQuiz() {
            legendDisplay.innerHTML = '';
            scoreDisplay.textContent = `Richtige Antworten: 0/${currentRoomsOnCanvas.length}`;

            // –°–æ–±–∏—Ä–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–º–Ω–∞—Ç, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –Ω–∞ —Ö–æ–ª—Å—Ç–µ
            const uniqueRoomTypesOnCanvas = new Set(currentRoomsOnCanvas.map(room => room.german));

            // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –Ω–æ–º–µ—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–º–Ω–∞—Ç—ã
            const roomTypeNumbers = {};
            currentRoomsOnCanvas.forEach(room => {
                if (!roomTypeNumbers[room.german]) {
                    roomTypeNumbers[room.german] = [];
                }
                roomTypeNumbers[room.german].push(room.number);
            });

            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º Set –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
            const sortedUniqueRoomTypes = Array.from(uniqueRoomTypesOnCanvas).sort();

            sortedUniqueRoomTypes.forEach(roomType => {
                const roomData = allRoomsMap.get(roomType); // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ —Ç–∏–ø–µ –∫–æ–º–Ω–∞—Ç—ã
                if (!roomData) return;

                const correctNumbers = roomTypeNumbers[roomType].join(','); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –Ω–æ–º–µ—Ä–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
                const dotColorClass = getDotColorClass(roomData.article); // –ü–æ–ª—É—á–∞–µ–º –∫–ª–∞—Å—Å —Ü–≤–µ—Ç–∞ —Ç–æ—á–∫–∏

                const legendItemDiv = document.createElement('div');
                legendItemDiv.className = 'legend-item';
                legendItemDiv.innerHTML = `
                    <div class="legend-text-row">
                        <span class="color-dot ${dotColorClass}"></span>
                        <span class="text-gray-900 font-medium">${roomData.article} ${roomType}</span>
                        <input type="number" class="quiz-input" placeholder="Nummer" data-correct-numbers="${correctNumbers}" min="1" max="${currentRoomsOnCanvas.length}">
                        <!-- –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å" —É–¥–∞–ª–µ–Ω–∞ -->
                    </div>
                    <div class="feedback-message"></div>
                    <span class="correct-answer-display" style="display:none;">Richtige Nummern: ${correctNumbers}</span>
                `;
                legendDisplay.appendChild(legendItemDiv);
            });

            attachQuizEventListeners();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –∫ –≤–∏–∫—Ç–æ—Ä–∏–Ω–µ
        function attachQuizEventListeners() {
            document.querySelectorAll('.quiz-input').forEach(input => {
                input.oninput = (event) => {
                    const inputField = event.target;
                    const item = inputField.closest('.legend-item');
                    const feedbackMessage = item.querySelector('.feedback-message');
                    const correctNumbersStr = inputField.dataset.correctNumbers;
                    const correctNumbers = correctNumbersStr.split(',').map(Number);
                    const enteredNumber = parseInt(inputField.value);

                    item.classList.remove('correct', 'incorrect'); // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–ª–∞—Å—Å—ã
                    feedbackMessage.textContent = '';
                    feedbackMessage.classList.remove('feedback-correct', 'feedback-incorrect');

                    if (inputField.value.trim() === '') {
                        return;
                    }

                    if (isNaN(enteredNumber)) {
                        // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –Ω–æ –Ω–µ –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ incorrect –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏
                    } else if (correctNumbers.includes(enteredNumber)) {
                        item.classList.add('correct');
                    } else {
                        item.classList.add('incorrect');
                    }
                };
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–∞–ª–∏—Ç—Ä—ã –∫–æ–º–Ω–∞—Ç
        function renderPalette() {
            paletteItemsContainer.innerHTML = '';

            Array.from(allRoomsMap.keys()).forEach(roomType => {
                const roomData = allRoomsMap.get(roomType);
                if (!roomData) return;

                const paletteItemDiv = document.createElement('div');
                paletteItemDiv.className = `palette-item`;
                paletteItemDiv.draggable = true; // –î–µ–ª–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –ø–∞–ª–∏—Ç—Ä—ã –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–º
                paletteItemDiv.dataset.roomType = roomType; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∏–ø –∫–æ–º–Ω–∞—Ç—ã

                paletteItemDiv.innerHTML = `
                    <span>${roomData.content}</span>
                `;
                paletteItemsContainer.appendChild(paletteItemDiv);

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–∞–ª–∏—Ç—Ä—ã
                paletteItemDiv.addEventListener('dragstart', (event) => {
                    event.dataTransfer.setData('text/plain', roomType);
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
                    event.target.classList.add('dragging-palette-item');
                });

                paletteItemDiv.addEventListener('dragend', (event) => {
                    event.target.classList.remove('dragging-palette-item');
                });
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–Ω–∞—Ç –Ω–∞ —Ö–æ–ª—Å—Ç–µ
        function renderCanvas() {
            floorPlanDisplay.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–æ–º–Ω–∞—Ç—ã

            // –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
            for (let r = 1; r <= GRID_ROWS; r++) {
                for (let c = 1; c <= GRID_COLS; c++) {
                    const cellDiv = document.createElement('div');
                    cellDiv.className = 'grid-cell';
                    cellDiv.style.gridRow = r;
                    cellDiv.style.gridColumn = c;
                    floorPlanDisplay.appendChild(cellDiv);
                }
            }

            // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –Ω–æ–º–µ—Ä–∞ –∫–æ–º–Ω–∞—Ç–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –≤ —Å–µ—Ç–∫–µ
            const sortedRooms = [...currentRoomsOnCanvas].sort((a, b) => {
                if (a.gridRow !== b.gridRow) {
                    return a.gridRow - b.gridRow;
                }
                return a.gridColumn - b.gridColumn;
            });

            let roomNumber = 1;
            sortedRooms.forEach(room => {
                room.number = roomNumber++; // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã
            });

            currentRoomsOnCanvas = sortedRooms; // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Å—Å–∏–≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏

            currentRoomsOnCanvas.forEach(room => {
                const roomDiv = document.createElement('div');
                roomDiv.className = 'room';
                if (room.german === 'Flur') {
                    roomDiv.classList.add('corridor-room');
                }
                roomDiv.style.gridRow = `${room.gridRow} / span ${room.gridHeight}`;
                roomDiv.style.gridColumn = `${room.gridColumn} / span ${room.gridWidth}`;
                roomDiv.dataset.roomId = room.id; // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
                roomDiv.dataset.roomType = room.german; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∏–ø –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

                roomDiv.innerHTML = `
                    <span class="text-xl font-bold">${room.number}</span>
                    <span class="text-sm mt-1">${room.content}</span>
                `;

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç –Ω–∞ —Ö–æ–ª—Å—Ç–µ
                roomDiv.addEventListener('mousedown', startDraggingRoomOnCanvas);
                roomDiv.addEventListener('touchstart', startDraggingRoomOnCanvas, { passive: false }); // –î–ª—è —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã —Å —Ö–æ–ª—Å—Ç–∞ (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫/—Ç–∞–ø)
                roomDiv.addEventListener('dblclick', (e) => removeRoomFromCanvas(room.id, room.german));
                roomDiv.addEventListener('touchend', (e) => {
                    // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –¥–≤–æ–π–Ω–æ–≥–æ —Ç–∞–ø–∞
                    const now = new Date().getTime();
                    const lastTouch = roomDiv.dataset.lastTouch || 0;
                    const delta = now - lastTouch;
                    if (delta < 300 && delta > 0) { // –ï—Å–ª–∏ –≤—Ç–æ—Ä–æ–π —Ç–∞–ø –≤ —Ç–µ—á–µ–Ω–∏–µ 300–º—Å
                        removeRoomFromCanvas(room.id, room.german);
                    }
                    roomDiv.dataset.lastTouch = now;
                });


                floorPlanDisplay.appendChild(roomDiv);
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–≤–µ—Ä–∏
            currentRoomsOnCanvas.forEach(room => {
                const roomDiv = floorPlanDisplay.querySelector(`[data-room-id="${room.id}"]`);
                if (!roomDiv) return;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å–µ–¥–µ–π
                const neighbors = [
                    { row: room.gridRow - 1, col: room.gridColumn, side: 'top', oppositeSide: 'bottom' },
                    { row: room.gridRow + room.gridHeight, col: room.gridColumn, side: 'bottom', oppositeSide: 'top' },
                    { row: room.gridRow, col: room.gridColumn - 1, side: 'left', oppositeSide: 'right' },
                    { row: room.gridRow, col: room.gridColumn + room.gridWidth, side: 'right', oppositeSide: 'left' }
                ];

                neighbors.forEach(neighbor => {
                    // –î–ª—è –¥–≤–µ—Ä–µ–π, —Å–æ–µ–¥–∏–Ω—è—é—â–∏—Ö –∫–æ–º–Ω–∞—Ç—ã, –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Å–æ—Å–µ–¥–Ω—è—è –∫–æ–º–Ω–∞—Ç–∞
                    // –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –æ–Ω–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω—ã.
                    // –î–ª—è –∫–æ–º–Ω–∞—Ç 2x1, –¥–≤–µ—Ä–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ —Ü–µ–Ω—Ç—Ä—É –∏–ª–∏ —Å–±–æ–∫—É.
                    // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–≤–µ—Ä–µ–π: –µ—Å–ª–∏ —Å–æ—Å–µ–¥–Ω—è—è —è—á–µ–π–∫–∞ –∑–∞–Ω—è—Ç–∞ –ª—é–±–æ–π —á–∞—Å—Ç—å—é –¥—Ä—É–≥–æ–π –∫–æ–º–Ω–∞—Ç—ã.
                    const adjacentRoomExists = currentRoomsOnCanvas.some(otherRoom =>
                        otherRoom.id !== room.id &&
                        neighbor.row >= otherRoom.gridRow && neighbor.row < (otherRoom.gridRow + otherRoom.gridHeight) &&
                        neighbor.col >= otherRoom.gridColumn && neighbor.col < (otherRoom.gridColumn + otherRoom.gridWidth)
                    );

                    if (adjacentRoomExists) {
                        const doorDiv = document.createElement('div');
                        doorDiv.className = `door-indicator door-${neighbor.side}`;
                        roomDiv.appendChild(doorDiv);
                    }
                });
            });

            renderLegendQuiz(); // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∫—Ç–æ—Ä–∏–Ω—É –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–Ω–∞—Ç
            renderPalette(); // –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–ª–∏—Ç—Ä—É, —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–Ω–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
        }


        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã —Å —Ö–æ–ª—Å—Ç–∞
        function removeRoomFromCanvas(roomId, roomType) {
            currentRoomsOnCanvas = currentRoomsOnCanvas.filter(room => room.id !== roomId);
            renderCanvas(); // –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ–º —Ö–æ–ª—Å—Ç
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã –Ω–∞ —Ö–æ–ª—Å—Ç (–¥–ª—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–Ω–∞—Ç)
        let draggedRoomElement = null; // –•—Ä–∞–Ω–∏—Ç DOM-—ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç—Å—è
        let startGridRow, startGridColumn; // –ù–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–º–Ω–∞—Ç—ã
        let offsetX, offsetY; // –°–º–µ—â–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ –ª–µ–≤–æ–≥–æ —É–≥–ª–∞ —ç–ª–µ–º–µ–Ω—Ç–∞
        let draggedRoomData = null; // –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–π –∫–æ–º–Ω–∞—Ç–µ

        function startDraggingRoomOnCanvas(e) {
            e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞)

            const roomDiv = e.target.closest('.room');
            if (!roomDiv) return;

            draggedRoomElement = roomDiv;
            draggedRoomElement.classList.add('dragging');

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ grid-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–º–Ω–∞—Ç—ã –∏ –µ–µ –¥–∞–Ω–Ω—ã–µ
            draggedRoomData = currentRoomsOnCanvas.find(r => r.id === roomDiv.dataset.roomId);
            if (draggedRoomData) {
                startGridRow = draggedRoomData.gridRow;
                startGridColumn = draggedRoomData.gridColumn;
            } else {
                return; // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, –≤—ã—Ö–æ–¥–∏–º
            }

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
            draggedRoomElement.style.width = `${draggedRoomData.gridWidth * GRID_CELL_SIZE}px`;
            draggedRoomElement.style.height = `${draggedRoomData.gridHeight * GRID_CELL_SIZE}px`;

            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ –ª–µ–≤–æ–≥–æ —É–≥–ª–∞ —ç–ª–µ–º–µ–Ω—Ç–∞
            const rect = draggedRoomElement.getBoundingClientRect();
            if (e.type === 'mousedown') {
                offsetX = e.clientX - rect.left;
                offsetY = e.clientY - rect.top;
            } else if (e.type === 'touchstart') {
                offsetX = e.touches[0].clientX - rect.left;
                offsetY = e.touches[0].clientY - rect.top;
            }

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∞–±—Å–æ–ª—é—Ç–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ viewport
            draggedRoomElement.style.left = `${rect.left}px`;
            draggedRoomElement.style.top = `${rect.top}px`;
            document.body.appendChild(draggedRoomElement); // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤ body –¥–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è

            // –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è
            document.addEventListener('mousemove', dragRoomOnCanvas);
            document.addEventListener('mouseup', stopDraggingRoomOnCanvas);
            document.addEventListener('touchmove', dragRoomOnCanvas, { passive: false });
            document.addEventListener('touchend', stopDraggingRoomOnCanvas);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã –Ω–∞ —Ö–æ–ª—Å—Ç–µ
        function dragRoomOnCanvas(e) {
            if (!draggedRoomElement || !draggedRoomData) return;
            e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –Ω–∞ —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

            let clientX, clientY;
            if (e.type === 'mousemove') {
                clientX = e.clientX;
                clientY = e.clientY;
            } else if (e.type === 'touchmove') {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —ç–ª–µ–º–µ–Ω—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ viewport
            draggedRoomElement.style.left = `${clientX - offsetX}px`;
            draggedRoomElement.style.top = `${clientY - offsetY}px`;

            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é —è—á–µ–π–∫—É –Ω–∞ –ø–ª–∞–Ω–µ —ç—Ç–∞–∂–∞
            const floorPlanRect = floorPlanDisplay.getBoundingClientRect();
            const xInFloorPlan = clientX - floorPlanRect.left;
            const yInFloorPlan = clientY - floorPlanRect.top;

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–µ—Ä—Ö–Ω—é—é –ª–µ–≤—É—é —è—á–µ–π–∫—É, –∫–æ—Ç–æ—Ä—É—é –∑–∞–π–º–µ—Ç –∫–æ–º–Ω–∞—Ç–∞
            let targetCol = Math.floor(xInFloorPlan / GRID_CELL_SIZE) + 1;
            let targetRow = Math.floor(yInFloorPlan / GRID_CELL_SIZE) + 1;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ü–µ–ª–µ–≤–∞—è –æ–±–ª–∞—Å—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–µ—Ç–∫–∏
            if (targetRow >= 1 && (targetRow + draggedRoomData.gridHeight - 1) <= GRID_ROWS &&
                targetCol >= 1 && (targetCol + draggedRoomData.gridWidth - 1) <= GRID_COLS) {
                highlightTargetCells(targetRow, targetCol, draggedRoomData.gridWidth, draggedRoomData.gridHeight);
            } else {
                removeHighlight(); // –ï—Å–ª–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏, —É–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã –Ω–∞ —Ö–æ–ª—Å—Ç–µ
        function stopDraggingRoomOnCanvas(e) {
            if (!draggedRoomElement || !draggedRoomData) return;

            draggedRoomElement.classList.remove('dragging');
            removeHighlight(); // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É

            // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω–µ—á–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ viewport
            let finalClientX, finalClientY;
            if (e.type === 'mouseup') {
                finalClientX = e.clientX;
                finalClientY = e.clientY;
            } else if (e.type === 'touchend') {
                finalClientX = e.changedTouches[0].clientX;
                finalClientY = e.changedTouches[0].clientY;
            }

            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ floorPlanDisplay
            const floorPlanRect = floorPlanDisplay.getBoundingClientRect();
            const xInFloorPlan = finalClientX - floorPlanRect.left;
            const yInFloorPlan = finalClientY - floorPlanRect.top;

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–µ–ª–µ–≤—É—é —è—á–µ–π–∫—É —Å–µ—Ç–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞
            let newGridColumn = Math.floor(xInFloorPlan / GRID_CELL_SIZE) + 1;
            let newGridRow = Math.floor(yInFloorPlan / GRID_CELL_SIZE) + 1;

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º grid-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–µ—Ç–∫–∏, —É—á–∏—Ç—ã–≤–∞—è —Ä–∞–∑–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã
            newGridColumn = Math.max(1, Math.min(newGridColumn, GRID_COLS - draggedRoomData.gridWidth + 1));
            newGridRow = Math.max(1, Math.min(newGridRow, GRID_ROWS - draggedRoomData.gridHeight + 1));


            const roomId = draggedRoomData.id;
            const roomIndex = currentRoomsOnCanvas.findIndex(r => r.id === roomId);

            let shouldRevert = false;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–Ω—è—Ç–∞ –ª–∏ —Ü–µ–ª–µ–≤–∞—è –æ–±–ª–∞—Å—Ç—å –¥—Ä—É–≥–æ–π –∫–æ–º–Ω–∞—Ç–æ–π –∏–ª–∏ –≤—ã—Ö–æ–¥–∏—Ç –ª–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã
            if (isAreaOccupied(newGridRow, newGridColumn, draggedRoomData.gridWidth, draggedRoomData.gridHeight, roomId)) {
                shouldRevert = true;
                console.warn('Dieser Bereich ist bereits von einem anderen Zimmer belegt oder liegt au√üerhalb der Grenzen. Das Zimmer wurde an seine urspr√ºngliche Position zur√ºckgesetzt.');
            }

            // –£–¥–∞–ª—è–µ–º draggedRoomElement –∏–∑ body
            document.body.removeChild(draggedRoomElement);
            draggedRoomElement.style.position = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª–∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            draggedRoomElement.style.left = '';
            draggedRoomElement.style.top = '';
            draggedRoomElement.style.width = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É/–≤—ã—Å–æ—Ç—É
            draggedRoomElement.style.height = '';

            if (roomIndex !== -1) {
                if (shouldRevert) {
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–º–Ω–∞—Ç—É –Ω–∞ –Ω–∞—á–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ
                    currentRoomsOnCanvas[roomIndex].gridRow = startGridRow;
                    currentRoomsOnCanvas[roomIndex].gridColumn = startGridColumn;
                } else {
                    // –û–±–Ω–æ–≤–ª—è–µ–º grid-–ø–æ–∑–∏—Ü–∏—é
                    currentRoomsOnCanvas[roomIndex].gridRow = newGridRow;
                    currentRoomsOnCanvas[roomIndex].gridColumn = newGridColumn;
                }
            }

            draggedRoomElement = null; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç
            draggedRoomData = null; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–π –∫–æ–º–Ω–∞—Ç–µ

            // –£–¥–∞–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            document.removeEventListener('mousemove', dragRoomOnCanvas);
            document.removeEventListener('mouseup', stopDraggingRoomOnCanvas);
            document.removeEventListener('touchmove', dragRoomOnCanvas);
            document.removeEventListener('touchend', stopDraggingRoomOnCanvas);

            renderCanvas(); // –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ–º, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å grid-—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ–º–µ—Ä–∞ –∏ –¥–≤–µ—Ä–∏
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∑–æ–Ω—ã –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (floorPlanDisplay)
        floorPlanDisplay.addEventListener('dragover', (event) => {
            event.preventDefault(); // –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é —è—á–µ–π–∫—É –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ –∏–∑ –ø–∞–ª–∏—Ç—Ä—ã
            const roomType = event.dataTransfer.getData('text/plain');
            const roomData = allRoomsMap.get(roomType);
            if (!roomData) return;

            const floorPlanRect = floorPlanDisplay.getBoundingClientRect();
            const xInGrid = event.clientX - floorPlanRect.left;
            const yInGrid = event.clientY - floorPlanRect.top;

            const gridColumn = Math.floor(xInGrid / GRID_CELL_SIZE) + 1;
            const gridRow = Math.floor(yInGrid / GRID_CELL_SIZE) + 1;

            highlightTargetCells(gridRow, gridColumn, roomData.gridWidth, roomData.gridHeight);
        });

        floorPlanDisplay.addEventListener('dragleave', () => {
            removeHighlight(); // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
        });

        floorPlanDisplay.addEventListener('drop', (event) => {
            event.preventDefault();
            removeHighlight(); // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞

            const roomType = event.dataTransfer.getData('text/plain');
            const roomData = allRoomsMap.get(roomType);

            if (!roomData) return;

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —è—á–µ–π–∫—É —Å–µ—Ç–∫–∏, –∫—É–¥–∞ –±—ã–ª–æ —Å–±—Ä–æ—à–µ–Ω–æ
            const floorPlanRect = floorPlanDisplay.getBoundingClientRect();
            const xInGrid = event.clientX - floorPlanRect.left;
            const yInGrid = event.clientY - floorPlanRect.top;

            let gridColumn = Math.floor(xInGrid / GRID_CELL_SIZE) + 1;
            let gridRow = Math.floor(yInGrid / GRID_CELL_SIZE) + 1;

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º grid-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–µ—Ç–∫–∏, —É—á–∏—Ç—ã–≤–∞—è —Ä–∞–∑–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã
            gridColumn = Math.max(1, Math.min(gridColumn, GRID_COLS - roomData.gridWidth + 1));
            gridRow = Math.max(1, Math.min(gridRow, GRID_ROWS - roomData.gridHeight + 1));


            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–Ω—è—Ç–∞ –ª–∏ —Ü–µ–ª–µ–≤–∞—è –æ–±–ª–∞—Å—Ç—å
            if (isAreaOccupied(gridRow, gridColumn, roomData.gridWidth, roomData.gridHeight)) {
                console.warn('Dieser Bereich ist bereits belegt!');
                return;
            }

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –Ω–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã
            const newRoomId = `room-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;

            const newRoom = {
                id: newRoomId,
                german: roomType,
                ukrainian: roomData.ukrainian,
                content: roomData.content,
                gridRow: gridRow,
                gridColumn: gridColumn,
                gridWidth: roomData.gridWidth, // –î–æ–±–∞–≤–ª—è–µ–º —à–∏—Ä–∏–Ω—É
                gridHeight: roomData.gridHeight, // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã—Å–æ—Ç—É
                number: 0 // –ù–æ–º–µ—Ä –±—É–¥–µ—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ
            };

            currentRoomsOnCanvas.push(newRoom);
            renderCanvas(); // –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ–º —Ö–æ–ª—Å—Ç —Å –Ω–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç–æ–π
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–û—á–∏—Å—Ç–∏—Ç—å –ø–ª–∞–Ω"
        clearPlanBtn.addEventListener('click', () => {
            currentRoomsOnCanvas = []; // –û—á–∏—â–∞–µ–º –≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã
            renderCanvas(); // –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ–º –ø—É—Å—Ç–æ–π —Ö–æ–ª—Å—Ç
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ"
        checkAllBtn.addEventListener('click', () => {
            let correctCount = 0;
            const quizInputs = document.querySelectorAll('.legend-item .quiz-input');
            const totalQuestions = quizInputs.length;

            quizInputs.forEach(input => {
                const item = input.closest('.legend-item');
                const feedbackMessage = item.querySelector('.feedback-message');
                const correctAnswerDisplay = item.querySelector('.correct-answer-display');

                const correctNumbersStr = input.dataset.correctNumbers;
                const correctNumbers = correctNumbersStr.split(',').map(Number);
                const enteredNumber = parseInt(input.value);

                item.classList.remove('correct', 'incorrect'); // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–ª–∞—Å—Å—ã
                feedbackMessage.textContent = '';
                feedbackMessage.classList.remove('feedback-correct', 'feedback-incorrect');
                correctAnswerDisplay.style.display = 'none';

                if (isNaN(enteredNumber)) {
                    feedbackMessage.textContent = 'Bitte geben Sie eine Zahl ein.';
                    feedbackMessage.classList.add('feedback-incorrect');
                    item.classList.add('incorrect');
                } else if (correctNumbers.includes(enteredNumber)) {
                    correctCount++;
                    feedbackMessage.textContent = 'Richtig!';
                    feedbackMessage.className = 'feedback-message feedback-correct';
                    item.classList.add('correct');
                    input.disabled = true; // –û—Ç–∫–ª—é—á–∞–µ–º –ø–æ–ª–µ –ø–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
                } else {
                    feedbackMessage.textContent = `Falsch. Richtige Nummern: ${correctNumbers.join(', ')}`;
                    feedbackMessage.className = 'feedback-message feedback-incorrect';
                    item.classList.add('incorrect');
                    correctAnswerDisplay.textContent = `Richtige Nummern: ${correctNumbers.join(', ')}`;
                    correctAnswerDisplay.style.display = 'inline';
                }
            });

            scoreDisplay.textContent = `Richtige Antworten: ${correctCount}/${totalQuestions}`;
        });

        // –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            renderCanvas(); // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—É—Å—Ç–æ–≥–æ —Ö–æ–ª—Å—Ç–∞ –∏ –ø–∞–ª–∏—Ç—Ä—ã
        });
    </script>
</body>
</html>
